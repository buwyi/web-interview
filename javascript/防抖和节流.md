## 防抖和节流

- 节流： n 秒内只运行一次，若在 n 秒内重复触发，只有一次生效
- 防抖： n 秒后执行事件，若在 n 秒内重复触发，重新计时

节流的计时器写法

```javascript
function throttled2(fn, delay = 500) {
  let timer = null;
  return function (...args) {
    if (!timer) {
      timer = setTimeout(() => {
        fn.apply(this, args);
        timer = null;
      }, delay);
    }
  };
}
```

其中，在 delay 尚未到达时，调用该函数 timer 为计时器 ID 无法进入 if 分支创建新计时器
只有当 delay 到达，timer 被赋值为 null 时，才能进行下一次的函数调用
这样就实现了在 n 秒内重复触发，只有一次生效的效果

防抖的计时器写法

```javascript
function debounce(fn, delay = 500) {
  let timeout;
  return function (...args) {
    clearTimeout(timeout);
    timeout = setTimeout(() => {
      fn.apply(this, args);
    }, delay);
  };
}
```

### 应用场景

- 防抖
  搜索框输入，
  手机号、邮箱验证码输入
  窗口 resize
- 节流
  滚动加载
  搜索联想功能
