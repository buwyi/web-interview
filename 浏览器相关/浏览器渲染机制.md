# 浏览器渲染机制

## 浏览器内核
浏览器内核一般来说分为两个部分，分别是渲染引擎和JS引擎。
渲染引擎发展历史可见连接[](https://zhuanlan.zhihu.com/p/102911463)
总结来说，**2013 年以前，代表有 Trident（IE），Gecko（firefox），Webkit（Safari chrome 等）以及 Presto（opera)。2013 年，谷歌开始研发 blink 引擎，chrome 28 以后开始使用，而 opera 则放弃了自主研发的 Presto 引擎，投入谷歌怀抱，和谷歌一起研发 blink 引擎**
JS引擎，V8引擎， 打开浏览器输入chrome://version可见到

## 渲染过程三步走
- 浏览器解析HTML、CSS、JS，从网络请求得到的字节转换成字符串，再转换成相应的树，DOM树，CSSDOM树
- 浏览器通过DOM树和CSSDOM树来构造Rendering Tree，期间涉及了css的回流与重绘过程
- 最后调用操作系统的Native GUI的API绘制

## 渲染过程中的细节
### DOM树，CSSDOM树，JS文件之间的相互影响关系

首先来看DOM树和CSSDOM树，二者在构建时，若无外界影响，应该为并行且互不影响，最后和成为Rendering树。
DOM树和JS文件之间，分为一下关系
- 直接插入的`<script>`标签，则立刻停止DOM树，加载JS文件并且执行
- 插入`<script defer>`标签，则不停止DOM树，当即开始加载JS文件，当二者均结束后JS文件开始执行
- 插入`<script async>`标签，则不停止DOM树，当即开始记载JS文件，JS文件加载完毕后，不管DOM执行是否结束，执行JS文件，并且如果未执行完成DOM树，阻塞DOM树的执行
DOM树和JS和CSSDOM树，
当DOM树引入的JS文件中涉及到了样式的更改，就需要等待CSSDOM树完全构建完成，才能进行更改，因为不完整的CSSDOM树是无法使用的，所以JS不仅会自己阻塞DOM树构建，还能导致CSSDOM树也阻塞DOM树构建